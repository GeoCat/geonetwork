<div class="container mx-auto p-4">
  <div class="mb-4">
    <button pButton icon="pi pi-arrow-left" label="Back to Results"
            (click)="goBack()" [outlined]="true"></button>
  </div>

  <div *ngIf="isLoading()" class="text-center p-8">
    <i class="pi pi-spin pi-spinner text-3xl"></i>
    <p class="mt-2">Loading details...</p>
  </div>

  <div *ngIf="result() && !isLoading()">
    <p-card>
      <ng-template pTemplate="header">
        <div class="p-4 bg-surface-50">
          <h1 class="text-2xl font-bold">{{ result()?._source?.resourceTitleObject?.['default'] }}</h1>
          <h2 class="text-xl">{{ result()?._source?.resourceType }}</h2>
          <p class="text-surface-600 mt-2">ID: {{ result()?._source?.uuid }}</p>
        </div>
      </ng-template>

      <div class="p-4">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="md:col-span-1">
            <div class="bg-surface-100 rounded p-8 text-center">
              <img *ngIf="getOverviewImage(); else noImage"
                   [src]="getOverviewImage()"
                   [alt]="getOverviewImageName()"
                   class="w-full h-auto rounded shadow-md"
                   (error)="$event.target.style.display='none'">
              <ng-template #noImage>
                <i class="pi pi-file-o text-6xl text-surface-400"></i>
                <p class="mt-2 text-sm text-surface-600">No preview available</p>
              </ng-template>
            </div>
          </div>

          <div class="md:col-span-2">
            <h3 class="text-xl font-semibold mb-3">Description</h3>
            <p class="text-surface-700 leading-relaxed mb-6">
              {{ result()?._source?.resourceAbstractObject?.['default'] || 'No description available' }}
            </p>

            <div class="flex gap-3">
              <button pButton icon="pi pi-download" label="Download"
                      class="flex-auto md:flex-initial"></button>
              <button pButton icon="pi pi-share-alt" label="Share"
                      [outlined]="true"></button>
            </div>
          </div>
        </div>
      </div>
    </p-card>
  </div>

  <div *ngIf="!result() && !isLoading()" class="text-center p-8">
    <i class="pi pi-exclamation-triangle text-4xl text-orange-500"></i>
    <h2 class="text-xl font-semibold mt-3">Record Not Found</h2>
    <p class="text-surface-600 mt-2">The requested catalogue item could not be found.</p>
  </div>
</div>
